import{u as v,a as w,b as f,r as g,j as e,c as y,d as S,L as C,f as k}from"./index-C7Va29mY.js";function M({movies:r=[],type:s}){const o=v(),d=w(),{movies:h,tvShows:i}=f(t=>t.watchlist),{isAuthenticated:m}=f(t=>t.user),l=t=>s==="movie"?h.some(a=>a.id===t):i.some(a=>a.id===t),c=t=>{l(t.id)?o(y({id:t.id,type:s})):o(S({item:t,type:s}))},[n,p]=g.useState(1),u=10,x=Math.ceil(r.length/u),j=(n-1)*u,N=r.slice(j,j+u);return!r||r.length===0?e.jsx("p",{className:"text-center mt-5",children:"No movies available."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex flex-wrap justify-content-start",style:{gap:"1rem"},children:N.map(t=>{var a;return e.jsxs("div",{className:"card border-0",style:{width:"18%",minWidth:"150px",height:"320px",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{height:"280px",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:()=>d(`/movie/Details/${t.id}`,{state:{type:s}}),children:e.jsx("img",{className:"card-img-top",src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://via.placeholder.com/220x320?text=No+Image",alt:s==="movie"?t.title:t.name,style:{maxHeight:"100%",width:"220px"}})}),e.jsxs("div",{className:"card-body",style:{flexGrow:1,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("h6",{className:"card-title",style:{fontSize:"1rem",margin:0,flex:1,marginRight:"0.5rem",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},title:s==="movie"?t.title:t.name,children:s==="movie"?t.title:t.name}),e.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:"bold",whiteSpace:"nowrap",flexShrink:0},children:[((a=t.vote_average)==null?void 0:a.toFixed(1))||"N/A"," ⭐"]})]}),e.jsxs("div",{className:"card-text",style:{fontSize:"0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:s==="movie"?t.release_date:t.first_air_date}),m&&e.jsx("button",{className:`btn ${l(t.id)?"btn-danger":"btn-outline-danger"}`,onClick:b=>{b.stopPropagation(),c(t)},children:e.jsx("i",{className:`bi bi-heart${l(t.id)?"-fill":""}`})})]})]})]},t.id)})}),x>1&&e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${n===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>n>1&&p(n-1),children:"Previous"})}),[...Array(x)].map((t,a)=>e.jsx("li",{className:`page-item ${n===a+1?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>p(a+1),children:a+1})},a)),e.jsx("li",{className:`page-item ${n===x?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>n<x&&p(n+1),children:"Next"})})]})})})]})}function $(){const r=v(),{data:s,loading:o,error:d}=f(c=>c.api),{lang:h}=g.useContext(C),[i,m]=g.useState("movie"),l=c=>({en:"en-US",ar:"ar-SA",fr:"fr-FR",zh:"zh-CN"})[c]||"en-US";return g.useEffect(()=>{r(k({type:i,customParams:{language:l(h)}}))},[i,h,r]),o?e.jsx("div",{className:"container mt-4 text-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):d?e.jsx("div",{className:"container mt-4 text-center",children:e.jsxs("div",{className:"alert alert-danger",role:"alert",children:["Error: ",d]})}):e.jsxs("div",{className:"container mt-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h5",{children:i==="movie"?"Best Movies":"Best TV Shows"}),e.jsxs("h1",{children:["World's Best ",i==="movie"?"Movies":"TV Shows"]}),e.jsxs("div",{className:"btn-group mt-3",role:"group",children:[e.jsx("button",{className:`btn btn-${i==="movie"?"primary":"outline-primary"}`,onClick:()=>m("movie"),children:"Movies"}),e.jsx("button",{className:`btn btn-${i==="tv"?"primary":"outline-primary"}`,onClick:()=>m("tv"),children:"TV Shows"})]})]}),s&&s.length>0?e.jsx(M,{movies:s,type:i}):e.jsx("div",{className:"text-center",children:e.jsx("p",{children:"No movies found. Please try a different search or category."})})]})}export{$ as default};
